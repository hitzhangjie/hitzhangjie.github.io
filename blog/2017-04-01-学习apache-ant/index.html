<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Web站点描述">
<title>
学习Apache Ant - 介绍
</title>



        <meta property="og:title" content="学习Apache Ant - 介绍" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Web站点描述"/>
<meta property="og:url" content="https://hitzhangjie.github.io/blog/2017-04-01-%E5%AD%A6%E4%B9%A0apache-ant/"/>
<meta property="og:site_name" content="介绍"/>




<meta property="og:image" content="https://hitzhangjie.github.io/home/me.jpg"/>

<meta property="og:image" content="https://hitzhangjie.github.io/home/profile.jpg"/>




        
<link rel="shortcut icon" href="/img/fav.ico">


        





<link rel="stylesheet" href="/css/main.min.5c5478bdd5363758f3e73657d5339b1ac7c131a401ffc3338edd7eb5e1a0114e.css" integrity="sha256-XFR4vdU2N1jz5zZX1TObGsfBMaQB/8Mzjt1&#43;teGgEU4=" crossorigin="anonymous" media="screen">




    <link rel="stylesheet" href="/custom.css" integrity="" crossorigin="anonymous" media="screen">

        
        
        
        
    </head>
    <body>
        <section id="top" class="section">
            
            <div class="container hero  fade-in one ">
                

    <h1 class="bold-title is-1">博客</h1>


            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/">主页</a>
            

            
            

            
                
            

            
                
            

            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="https://hitzhangjie.github.io/projects/">
                  
                  项目
                  
                  </a>
                
                
            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="https://hitzhangjie.github.io/blog/">
                  
                  返回 博客
                  
                  </a>
                
                
            
            
            
            
            
            <a class="navbar-item" href="/#about">关于</a>
            
            
            
            
            
            <a class="navbar-item" href="/#thanks">致谢</a>
            
            
            
            

            
            
            <a class="navbar-item" href="/#contact">联系方式</a>
            
            

            
            
            
            
            <a class="navbar-item" href="https://hitzhangjie.github.io/en/">English</a>
            
            

            
            
        </div>
    </nav>
    <hr>
</div>



                
    <div class="container">
        <h2 class="title is-1 top-pad strong-post-title">
            <a href="https://hitzhangjie.github.io/blog/2017-04-01-%E5%AD%A6%E4%B9%A0apache-ant/">学习Apache Ant</a>
        </h2>
        <div class="post-data">
            2017-04-01 |
            7 分钟
        </div>
        
        <div class="blog-share">
            分享:
            
            <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=%e5%ad%a6%e4%b9%a0Apache%20Ant%20https%3a%2f%2fhitzhangjie.github.io%2fblog%2f2017-04-01-%25E5%25AD%25A6%25E4%25B9%25A0apache-ant%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
            
            
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fhitzhangjie.github.io%2fblog%2f2017-04-01-%25E5%25AD%25A6%25E4%25B9%25A0apache-ant%2f"  onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fab fa-facebook-f"></i>
                <span class="hidden">Facebook</span>
            </a>
            
            
            <a class="icon-pinterest" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fhitzhangjie.github.io%2fblog%2f2017-04-01-%25E5%25AD%25A6%25E4%25B9%25A0apache-ant%2f&amp;description=%e5%ad%a6%e4%b9%a0Apache%20Ant" onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
                <i class="fab fa-pinterest-p"></i>
                <span class="hidden">Pinterest</span>
            </a>
            
            
            <a class="icon-google-plus" href="https://plus.google.com/share?url=https%3a%2f%2fhitzhangjie.github.io%2fblog%2f2017-04-01-%25E5%25AD%25A6%25E4%25B9%25A0apache-ant%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                <i class="fab fa-google-plus-g"></i>
                <span class="hidden">Google+</span>
            </a>
            
        </div>
        
        
    </div>
    
    <div>

    
    <div class="container markdown top-pad">
        <p>Apache Ant是由Apache开发的基于Java的构建工具，本文对tutorialspoint上面的Apache Ant教程进行简要总结。</p>
<h3 id="1-为什么需要这样一个构建工具">1 为什么需要这样一个构建工具？</h3>
<p>Ant是Another Neat Tool的缩写形式，为什么需要这样一个工具呢？跟它的名字一样，就是希望我们开发人员的工作能够更加neat！</p>
<p>开发人员有些琐碎的、重复性的工作，包括：编译代码、打包可执行程序、部署程序到测试服务器、测试改变、拷贝代码到不同的地方。Ant可以帮助我们自动化上面列举的这几个步骤，简化我们的工作。</p>
<p>Ant是tomcat的作者开发出来的，最初适用于构建tomcat的，并且作为tomcat的一部分，之所以开发它是为了弥补当初Apache Make工具（没有在apache项目列表中搜索到该项目）的不足之处，2000年的时候Ant从tomcat项目中独立出来作为一个独立的项目开发。</p>
<p>至于Apache Ant的优势具体在哪，这个我们最后在给出来，目的是让大家结合自身工作经历，根据Apache Ant的功能自己主动去发现它的优势。</p>
<h3 id="2-ant-buildxml">2 Ant build.xml</h3>
<p>Ant的构建脚本默认是build.xml，也可以用其他的文件名。build.xml里面通常包括tag <!-- raw HTML omitted -->，这里name指定了工程的名字，default是默认名字，basedir指定了工程的根目录。另外还包括多个tag <!-- raw HTML omitted -->，其中name指定了目标动作的名字，例如compile、package、clean等等，它们之间存在某种依赖关系，可以通过depends指定。例如package依赖clean、compile，就可以指定depends=&quot;clean,package&rdquo;，注意依赖先后顺序，不要写成depends=&quot;package,clean&rdquo;。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
   <span style="color:#f92672">&lt;</span>project name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Hello World Project&#34;</span> <span style="color:#66d9ef">default</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">&gt;</span>

   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>echo<span style="color:#f92672">&gt;</span>Hello World <span style="color:#f92672">-</span> Welcome to Apache Ant<span style="color:#f92672">!&lt;/</span>echo<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><p>示例2：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;deploy&#34;</span> depends<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;package&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">....</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;package&#34;</span> depends<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clean,compile&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">....</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clean&#34;</span> <span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">....</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;compile&#34;</span> <span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">....</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
</code></pre></div><p>build.xml里面可以使用ant预先定义的一些变量，例如：</p>
<table>
<thead>
<tr>
<th align="left">property</th>
<th align="left">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">ant.file</td>
<td align="left">The full location of the build file.</td>
</tr>
<tr>
<td align="left">ant.version</td>
<td align="left">The version of the Apache Ant installation.</td>
</tr>
<tr>
<td align="left">basedir</td>
<td align="left">The basedir of the build, as specified in the basedir attribute of the project element.</td>
</tr>
<tr>
<td align="left">ant.java.version</td>
<td align="left">The version of the JDK that is used by Ant.</td>
</tr>
<tr>
<td align="left">ant.project.name</td>
<td align="left">The name of the project, as specified in the name atrribute of the project element.</td>
</tr>
<tr>
<td align="left">ant.project.default-target</td>
<td align="left">The default target of the current project.</td>
</tr>
<tr>
<td align="left">ant.project.invoked-targets</td>
<td align="left">Comma separated list of the targets that were invoked in the current project.</td>
</tr>
<tr>
<td align="left">ant.core.lib</td>
<td align="left">The full location of the Ant jar file.</td>
</tr>
<tr>
<td align="left">ant.home</td>
<td align="left">The home directory of Ant installation.</td>
</tr>
<tr>
<td align="left">ant.library.dir</td>
<td align="left">The home directory for Ant library files - typically ANT_HOME/lib folder.</td>
</tr>
</tbody>
</table>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
<span style="color:#f92672">&lt;</span>project name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Hello World Project&#34;</span> <span style="color:#66d9ef">default</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sitename&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;www.tutorialspoint.com&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>echo<span style="color:#f92672">&gt;</span>Apache Ant version is $<span style="color:#f92672">{</span>ant<span style="color:#f92672">.</span><span style="color:#a6e22e">version</span><span style="color:#f92672">}</span> <span style="color:#f92672">-</span> You are at $<span style="color:#f92672">{</span>sitename<span style="color:#f92672">}</span> <span style="color:#f92672">&lt;/</span>echo<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><p>这样ant构建过程中会输出当前ant使用的版本以及站点名称，其中ant.version是ant的预定义变量，sitename是我们自己定义的变量。</p>
<h3 id="3-ant-buildproperties">3 Ant build.properties</h3>
<p>像上线这样在build.xml里面创建自定义变量的方式，如果自定义变量少的话还可以，当面对一个大型的工程有很多自定义变量的时候，直接在build.xml里面定义变量就困难了，那怎么办呢？
我们可以在一个单独的属性配置文件中对需要用到的自定义属性进行配置，然后在build.xml里面进行引用。这个默认的属性配置文件是build.properties。</p>
<p>示例1：</p>
<p>build.xml：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
<span style="color:#f92672">&lt;</span>project name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Hello World Project&#34;</span> <span style="color:#66d9ef">default</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>property file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build.properties&#34;</span><span style="color:#f92672">/&gt;</span>
   
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>echo<span style="color:#f92672">&gt;</span>Apache Ant version is $<span style="color:#f92672">{</span>ant<span style="color:#f92672">.</span><span style="color:#a6e22e">version</span><span style="color:#f92672">}</span> <span style="color:#f92672">-</span> You are at $<span style="color:#f92672">{</span>sitename<span style="color:#f92672">}</span> <span style="color:#f92672">&lt;/</span>echo<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><p>这个文件里面引用了一个自定义变量，我们将其定义在build.properties里面。</p>
<p>build.properties：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#960050;background-color:#1e0010">#</span> The Site Name
sitename<span style="color:#f92672">=</span>www<span style="color:#f92672">.</span><span style="color:#a6e22e">tutorialspoint</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span>
buildversion<span style="color:#f92672">=</span>3<span style="color:#f92672">.</span><span style="color:#a6e22e">3</span><span style="color:#f92672">.</span><span style="color:#a6e22e">2</span>
</code></pre></div><h3 id="4-ant-data-types">4 Ant Data Types</h3>
<p>不要将这里的数据类型跟编程语言中的数据类型混为一谈，这里说要描述的Ant提供的数据类型代表了Ant提供的一种service。</p>
<p>fileset类型代表了一系列文件集合，通过它可以包括某些文件或者排除某些文件，包括、排除文件是通过模式匹配的方式来实现。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${src}&#34;</span> casesensitive<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;yes&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.java&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>exclude name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*Stub*&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
</code></pre></div><p>这个例子中创建了一个fileset，它指向了源代码目录${src}，这里匹配文件模式的时候大小写敏感，并且包括src目录下以及任意子目录下的java文件，并排除Stub文件。</p>
<p>patternset类型代表了一些列的pattern集合，通过它可以指定一些include用的pattern或者exclude用的pattern。这里我们队实例1进行一下改造，即示例2。</p>
<p>示例2：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>patternset id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;java.files.without.stubs&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src/**/*.java&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>exclude name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src/**/*Stub*&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/</span>patternset<span style="color:#f92672">&gt;</span>

<span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${src}&#34;</span> casesensitive<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;yes&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>patternset refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;java.files.without.stubs&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
</code></pre></div><p>通过patternset来指定pattern模式的方式有个好处，一个是更加直观，还有一个就是便于被复用。另外这里的pattern中可以使用的匹配符号包括：</p>
<table>
<thead>
<tr>
<th align="left">character</th>
<th align="left">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">?</td>
<td align="left">可以匹配任意当个字符</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">可以匹配0个或者多个字符</td>
</tr>
<tr>
<td align="left">**</td>
<td align="left">可以匹配当前目录或者任意多级子目录（递归地哦）</td>
</tr>
</tbody>
</table>
<p>filelist类型与fileset有点类似但是又有不同。相同点是都是用于指定一个文件集合，不同点是fileset是通过pattern匹配的方式来完成包括、排除，而filelist是必须通过指定具体的文件名字，不能使用pattern进行匹配。</p>
<p>示例3：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>filelist id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;config.files&#34;</span> dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${webapp.src.folder}&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>file name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;applicationConfig.xml&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>file name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faces-config.xml&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>file name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;web.xml&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>file name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;portlet.xml&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/</span>filelist<span style="color:#f92672">&gt;</span>
</code></pre></div><p>上面这里定义了一个文件列表，包括了<!-- raw HTML omitted -->所指定的这些文件。</p>
<p>filterset类型往往用于筛选满足指定条件的文件，例如在copy任务中与fileset相结合拷贝指定版本的文件，看下这里的示例吧。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>copy todir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${output.dir}&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${releasenotes.dir}&#34;</span> includes<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.txt&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>filterset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>filter token<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;VERSION&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${current.version}&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>filterset<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>copy<span style="color:#f92672">&gt;</span>
</code></pre></div><p>上面这个动作是要fileset中指定的发行笔记文件拷贝到输出目录${output.dir}中，但是呢，这里拷贝的时候只拷贝特定版本的发行笔记，只有与filter中匹配的版本才会被拷贝。</p>
<p>path数据类型用于指定classpath，它有个好处就是可以对多个可能的classpath entries通过具体的系统指定的分隔符进行连接，例如在windows下面通过分号进行连接，但是在linux下面通过冒号进行连接。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>path id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build.classpath.jar&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>pathelement path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${env.J2EE_HOME}/${j2ee.jar}&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lib&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.jar&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>path<span style="color:#f92672">&gt;</span>
</code></pre></div><p>上面这个示例就是将${J2EE_HOME}/${j2ee.jar}中的所有*.jar都看做是一个classpath entry，然后用系统对应的classpath分隔符进行连接，最终构成一个完整的classpath。</p>
<h3 id="5-ant的一个简单构建示例">5 Ant的一个简单构建示例</h3>
<p>下面看一个Ant构建的完整示例，首先要创建一个工程，工程结构如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">+---</span>db                <span style="color:#75715e">// 数据库脚本目录
</span><span style="color:#75715e"></span><span style="color:#f92672">+---</span>src               <span style="color:#75715e">// 源代码目录
</span><span style="color:#75715e"></span><span style="color:#f92672">.</span>  <span style="color:#f92672">+---</span>faxapp
<span style="color:#f92672">.</span>  <span style="color:#f92672">+---</span>dao
<span style="color:#f92672">.</span>  <span style="color:#f92672">+---</span>entity
<span style="color:#f92672">.</span>  <span style="color:#f92672">+---</span>util
<span style="color:#f92672">.</span>  <span style="color:#f92672">+---</span>web
<span style="color:#f92672">+---</span>war               <span style="color:#75715e">// 资源目录
</span><span style="color:#75715e"></span>   <span style="color:#f92672">+---</span>images         <span style="color:#75715e">// - 图片
</span><span style="color:#75715e"></span>   <span style="color:#f92672">+---</span>js             <span style="color:#75715e">// - js
</span><span style="color:#75715e"></span>   <span style="color:#f92672">+---</span>META<span style="color:#f92672">-</span>INF       <span style="color:#75715e">// - 其他
</span><span style="color:#75715e"></span>   <span style="color:#f92672">+---</span>styles         <span style="color:#75715e">// - css文件
</span><span style="color:#75715e"></span>   <span style="color:#f92672">+---</span>WEB<span style="color:#f92672">-</span>INF
      <span style="color:#f92672">+---</span>classes     <span style="color:#75715e">// - 编译输出classes文件
</span><span style="color:#75715e"></span>      <span style="color:#f92672">+---</span>jsp         <span style="color:#75715e">// - 编写的jsp文件
</span><span style="color:#75715e"></span>      <span style="color:#f92672">+---</span>lib         <span style="color:#75715e">// - 应用的jar包
</span></code></pre></div><p>对应的build.xml文件如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
<span style="color:#f92672">&lt;</span>project name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fax&#34;</span> basedir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#66d9ef">default</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;web.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;war&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WEB-INF/classes&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fax&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>path id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;master-classpath&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WEB-INF/lib&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*.jar&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>pathelement path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>path<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Compile source tree java files&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>mkdir dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>javac destdir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span> source<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.5&#34;</span> target<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.5&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>src path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${src.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;master-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>javac<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
 
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clean&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Clean output directories&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>delete<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.class&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>delete<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><p>对于上面build.xml中用到的自定义属性，还需要创建对应的属性文件build.properties：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;web.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;war&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WEB-INF/classes&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><h3 id="6-ant构建文档">6 Ant构建文档</h3>
<p>Ant可以为工程生成文档，这个是利用javadoc命令行工具来对某些包某些类某些访问类型修饰符对应的成员或者方法根据源代码中添加的javadoc注释来生成项目API文档。下面是一个示例。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;generate-javadoc&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>javadoc packagenames<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faxapp.*&#34;</span> sourcepath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${src.dir}&#34;</span> 
      destdir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;doc&#34;</span> version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span> windowtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Fax Application&#34;</span><span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>doctitle<span style="color:#f92672">&gt;&lt;![</span>CDATA<span style="color:#f92672">[=</span> Fax Application <span style="color:#f92672">=]]&gt;&lt;/</span>doctitle<span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>bottom<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;![</span>CDATA<span style="color:#f92672">[</span>Copyright <span style="color:#960050;background-color:#1e0010">©</span> 2011<span style="color:#f92672">.</span> All Rights Reserved<span style="color:#f92672">.]]&gt;</span>
      <span style="color:#f92672">&lt;/</span>bottom<span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>group title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;util packages&#34;</span> packages <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.util.*&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>group title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;web packages&#34;</span> packages <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.web.*&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>group title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;data packages&#34;</span> packages <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.entity.*:faxapp.dao.*&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>javadoc<span style="color:#f92672">&gt;</span>
   
   <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;java doc has been generated!&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="7-ant构建jar包">7 Ant构建jar包</h3>
<p>Ant将classes达成jar包示例，例如将faxapp/util下面的除Test.class之外的所有文件达成一个jar包${web.dir}/lib/util.jar。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>jar destfile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}/lib/util.jar&#34;</span>
 basedir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${build.dir}/classes&#34;</span>
 includes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp/util/**&#34;</span>
 excludes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**/Test.class&#34;</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><p>如果是希望将util.jar打包成一个可以执行的jar文件的话，需要为其指定main-class，这里可以通过添加manifest来完成。</p>
<p>示例2：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>jar destfile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}/lib/util.jar&#34;</span>
   basedir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${build.dir}/classes&#34;</span>
   includes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp/util/**&#34;</span>
   excludes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**/Test.class&#34;</span><span style="color:#f92672">&gt;</span>
   
   <span style="color:#f92672">&lt;</span>manifest<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>attribute name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Main-Class&#34;</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;com.tutorialspoint.util.FaxUtil&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>manifest<span style="color:#f92672">&gt;</span>
   
<span style="color:#f92672">&lt;/</span>jar<span style="color:#f92672">&gt;</span>
</code></pre></div><p>最后呢，将上述jar翻到一个target里面：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build-jar&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>jar destfile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/lib/util.jar&#34;</span>
      basedir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}/classes&#34;</span>
      includes<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faxapp/util/**&#34;</span>
      excludes<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/Test.class&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>manifest<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>attribute name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Main-Class&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;com.tutorialspoint.util.FaxUtil&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>manifest<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>jar<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="8-ant构建war包">8 Ant构建war包</h3>
<p>除了上面提到的构建jar包之外，Ant也可以用来构建war包，我们这里只给出一个详细的war包构建配置文件，不再详细展开。</p>
<p>示例1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build-war&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>war destfile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fax.war&#34;</span> webxml<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/web.xml&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WebContent&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.*&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>lib dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;thirdpartyjars&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>exclude name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;portlet.jar&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>lib<span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>classes dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}/web&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>war<span style="color:#f92672">&gt;</span>
   
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="9-ant的一个完整buildxml配置">9 Ant的一个完整build.xml配置</h3>
<p>这里给出了一个综合配置示例，对前面说描述的内容进行了一下综合。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
<span style="color:#f92672">&lt;</span>project name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fax&#34;</span> basedir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#66d9ef">default</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;usage&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>property file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;build.properties&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;src.dir&#34;</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;src&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;web.dir&#34;</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;war&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;javadoc.dir&#34;</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;doc&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;build.dir&#34;</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}/WEB-INF/classes&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;name&#34;</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fax&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>path id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;master-classpath&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>fileset dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}/WEB-INF/lib&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>include name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;*.jar&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>pathelement path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>path<span style="color:#f92672">&gt;</span>
    
   <span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;javadoc&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>javadoc packagenames <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.*&#34;</span> sourcepath <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${src.dir}&#34;</span> 
         destdir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;doc&#34;</span> version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span> windowtitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Fax Application&#34;</span><span style="color:#f92672">&gt;</span>
         
         <span style="color:#f92672">&lt;</span>doctitle<span style="color:#f92672">&gt;&lt;![</span>CDATA<span style="color:#f92672">[&lt;</span>h1<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span>  Fax Application  <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;/</span>h1<span style="color:#f92672">&gt;]]&gt;</span>
         <span style="color:#f92672">&lt;/</span>doctitle<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>bottom<span style="color:#f92672">&gt;&lt;![</span>CDATA<span style="color:#f92672">[</span>Copyright <span style="color:#960050;background-color:#1e0010">©</span> 2011<span style="color:#f92672">.</span> All Rights Reserved<span style="color:#f92672">.]]&gt;</span>
         <span style="color:#f92672">&lt;/</span>bottom<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>group title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;util packages&#34;</span> packages <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.util.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;</span>group title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;web packages&#34;</span> packages <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.web.*&#34;</span><span style="color:#f92672">/&gt;</span> 
         <span style="color:#f92672">&lt;</span>group title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;data packages&#34;</span> packages <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;faxapp.entity.*:faxapp.dao.*&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>javadoc<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;usage&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${name} build file&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-----------------------------------&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Available targets are:&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;deploy    --&gt; Deploy application as directory&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;deploywar --&gt; Deploy application as a WAR file&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>echo message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;build&#34;</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Compile main source tree java files&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>mkdir dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
      
      <span style="color:#f92672">&lt;</span>javac destdir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${build.dir}&#34;</span> source <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.5&#34;</span> target <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.5&#34;</span> debug <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span>
         deprecation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;false&#34;</span> optimize <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;false&#34;</span> failonerror <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
         
         <span style="color:#f92672">&lt;</span>src path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${src.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;</span>classpath refid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;master-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
         
      <span style="color:#f92672">&lt;/</span>javac<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;deploy&#34;</span> depends <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;build&#34;</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Deploy application&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>copy todir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${deploy.path}/${name}&#34;</span> preservelastmodified <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**/*.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>copy<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;deploywar&#34;</span> depends <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;build&#34;</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Deploy application as a WAR file&#34;</span><span style="color:#f92672">&gt;</span>
   
      <span style="color:#f92672">&lt;</span>war destfile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${name}.war&#34;</span> webxml <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}/WEB-INF/web.xml&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${web.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**/*.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>war<span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>copy todir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${deploy.path}&#34;</span> preservelastmodified <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;.&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;*.war&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>copy<span style="color:#f92672">&gt;</span>
      
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
    
   <span style="color:#f92672">&lt;</span>target name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;clean&#34;</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Clean output directories&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>delete<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;**/*.class&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>delete<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="10-ant的一个更完整配置示例">10 Ant的一个更完整配置示例</h3>
<p>这里针对war包与tomcat的结合给出一个配置示例。</p>
<p>build.properties：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#960050;background-color:#1e0010">#</span> Ant properties <span style="color:#66d9ef">for</span> building the springapp
appserver<span style="color:#f92672">.</span><span style="color:#a6e22e">home</span><span style="color:#f92672">=</span>c<span style="color:#f92672">:</span><span style="color:#960050;background-color:#1e0010">\\</span>install<span style="color:#960050;background-color:#1e0010">\\</span>apache<span style="color:#f92672">-</span>tomcat<span style="color:#f92672">-</span>7<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">.</span><span style="color:#a6e22e">19</span>
<span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#66d9ef">for</span> Tomcat 5 use $appserver<span style="color:#f92672">.</span><span style="color:#a6e22e">home</span><span style="color:#f92672">}/</span>server<span style="color:#f92672">/</span>lib
<span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#66d9ef">for</span> Tomcat 6 use $appserver<span style="color:#f92672">.</span><span style="color:#a6e22e">home</span><span style="color:#f92672">}/</span>lib
appserver<span style="color:#f92672">.</span><span style="color:#a6e22e">lib</span><span style="color:#f92672">=</span>$<span style="color:#f92672">{</span>appserver<span style="color:#f92672">.</span><span style="color:#a6e22e">home</span><span style="color:#f92672">}/</span>lib
deploy<span style="color:#f92672">.</span><span style="color:#a6e22e">path</span><span style="color:#f92672">=</span>$<span style="color:#f92672">{</span>appserver<span style="color:#f92672">.</span><span style="color:#a6e22e">home</span><span style="color:#f92672">}/</span>webapps
tomcat<span style="color:#f92672">.</span><span style="color:#a6e22e">manager</span><span style="color:#f92672">.</span><span style="color:#a6e22e">url</span><span style="color:#f92672">=</span>http<span style="color:#f92672">:</span><span style="color:#75715e">//www.tutorialspoint.com:8080/manager
</span><span style="color:#75715e"></span>tomcat<span style="color:#f92672">.</span><span style="color:#a6e22e">manager</span><span style="color:#f92672">.</span><span style="color:#a6e22e">username</span><span style="color:#f92672">=</span>tutorialspoint
tomcat<span style="color:#f92672">.</span><span style="color:#a6e22e">manager</span><span style="color:#f92672">.</span><span style="color:#a6e22e">password</span><span style="color:#f92672">=</span>secret
</code></pre></div><p>build.xml:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
<span style="color:#f92672">&lt;</span>project name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fax&#34;</span> basedir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#66d9ef">default</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;usage&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>property file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build.properties&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;web.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;war&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;javadoc.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;doc&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build.dir&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WEB-INF/classes&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>property name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fax&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>path id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;master-classpath&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WEB-INF/lib&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*.jar&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>pathelement path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>path<span style="color:#f92672">&gt;</span>
    
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;javadoc&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>javadoc packagenames<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faxapp.*&#34;</span> sourcepath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${src.dir}&#34;</span> 
         destdir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;doc&#34;</span> version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> windowtitle<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Fax Application&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>doctitle<span style="color:#f92672">&gt;&lt;![</span>CDATA<span style="color:#f92672">[&lt;</span>h1<span style="color:#f92672">&gt;=</span> Fax Application <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;/</span>h1<span style="color:#f92672">&gt;]]&gt;&lt;/</span>doctitle<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>bottom<span style="color:#f92672">&gt;&lt;![</span>CDATA<span style="color:#f92672">[</span>Copyright <span style="color:#960050;background-color:#1e0010">©</span> 2011<span style="color:#f92672">.</span> All Rights Reserved<span style="color:#f92672">.]]&gt;&lt;/</span>bottom<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>group title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;util packages&#34;</span> packages<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faxapp.util.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;</span>group title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;web packages&#34;</span> packages<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faxapp.web.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;</span>group title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data packages&#34;</span> packages<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;faxapp.entity.*:faxapp.dao.*&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>javadoc<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;usage&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${name} build file&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;-----------------------------------&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Available targets are:&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;deploy    --&gt; Deploy application as directory&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;deploywar --&gt; Deploy application as a WAR file&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>echo message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Compile main source tree java files&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>mkdir dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;</span>javac destdir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span> source<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.5&#34;</span> target<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.5&#34;</span> debug<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span>
         deprecation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span> optimize<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span> failonerror<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>src path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${src.dir}&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;master-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>javac<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;deploy&#34;</span> depends<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Deploy application&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>copy todir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${deploy.path}/${name}&#34;</span> 
         preservelastmodified<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>copy<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;deploywar&#34;</span> depends<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;build&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Deploy application as a WAR file&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>war destfile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${name}.war&#34;</span> webxml<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}/WEB-INF/web.xml&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${web.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.*&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>war<span style="color:#f92672">&gt;</span>
      
      <span style="color:#f92672">&lt;</span>copy todir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${deploy.path}&#34;</span> preservelastmodified<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*.war&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>copy<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
    
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clean&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Clean output directories&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>delete<span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${build.dir}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;**/*.class&#34;</span><span style="color:#f92672">/&gt;</span>
         <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;/</span>delete<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
</code></pre></div><p>war包相关的定义已经全部给出了，这里还需要给出tomcat相关的部分定义，还是在build.xml里面。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#f92672">&lt;!--</span> <span style="color:#f92672">============================================================</span> <span style="color:#f92672">--&gt;</span>
    <span style="color:#f92672">&lt;!--</span> Tomcat tasks <span style="color:#f92672">--&gt;</span>
    <span style="color:#f92672">&lt;!--</span> <span style="color:#f92672">============================================================</span> <span style="color:#f92672">--&gt;</span>
    <span style="color:#f92672">&lt;</span>path id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant-classpath&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;!--</span> We need the Catalina jars <span style="color:#66d9ef">for</span> Tomcat <span style="color:#f92672">--&gt;</span>
        <span style="color:#f92672">&lt;!--</span>  <span style="color:#f92672">*</span> <span style="color:#66d9ef">for</span> other app servers <span style="color:#f92672">-</span> check the docs <span style="color:#f92672">--&gt;</span>
        <span style="color:#f92672">&lt;</span>fileset dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${appserver.lib}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span>include name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant.jar&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;/</span>fileset<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;/</span>path<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>taskdef name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;install&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;org.apache.catalina.ant.InstallTask&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/</span>taskdef<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>taskdef name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reload&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;org.apache.catalina.ant.ReloadTask&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/</span>taskdef<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>taskdef name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;list&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;org.apache.catalina.ant.ListTask&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/</span>taskdef<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>taskdef name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;start&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;org.apache.catalina.ant.StartTask&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/</span>taskdef<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>taskdef name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stop&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;org.apache.catalina.ant.StopTask&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>classpath refid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;catalina-ant-classpath&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/</span>taskdef<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reload&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Reload application in Tomcat&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>reload url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${tomcat.manager.url}&#34;</span>username<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${tomcat.manager.username}&#34;</span>
          password<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${tomcat.manager.password}&#34;</span> path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/${name}&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><p>下面对tomcat相关的几个targe他进行一下描述：
| task | desc |
|:&mdash;-:|:&mdash;-:|
|InstallTask|Installs a web application. Class Name: org.apache.catalina.ant.InstallTask|
|ReloadTask|Reload a web application. Class Name: org.apache.catalina.ant.ReloadTask|
|ListTask|Lists all web applications. Class Name: org.apache.catalina.ant.ListTask|
|StartTask|Starts a web application. Class Name: org.apache.catalina.ant.StartTask|
|StopTask|Stops a web application. Class Name: org.apache.catalina.ant.StopTask|
|ReloadTask|Reloads a web application without stopping. Class Name: org.apache.catalina.ant.ReloadTask|</p>
<h3 id="11-ant执行程序">11 Ant执行程序</h3>
<p>下面给出一个Ant传递参数并执行程序的配置示例。</p>
<p>java类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NotifyAdministrator</span>
<span style="color:#f92672">{</span>
   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span>
   <span style="color:#f92672">{</span>
      String email <span style="color:#f92672">=</span> args<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
      notifyAdministratorviaEmail<span style="color:#f92672">(</span>email<span style="color:#f92672">);</span>
      System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Administrator &#34;</span><span style="color:#f92672">+</span>email<span style="color:#f92672">+</span><span style="color:#e6db74">&#34; has been notified&#34;</span><span style="color:#f92672">);</span>
   <span style="color:#f92672">}</span>
   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">notifyAdministratorviaEmail</span><span style="color:#f92672">(</span>String email
   <span style="color:#f92672">{</span> 
       <span style="color:#75715e">//......
</span><span style="color:#75715e"></span>   <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>build.xml配置文件如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">?&gt;</span>
<span style="color:#f92672">&lt;</span>project name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sample&#34;</span> basedir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#66d9ef">default</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;notify&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;notify&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;</span>java fork<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> failonerror<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;yes&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;NotifyAdministrator&#34;</span><span style="color:#f92672">&gt;</span>
         <span style="color:#f92672">&lt;</span>arg line<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;admin@test.com&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/</span>java<span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>project<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="12-扩展ant">12 扩展Ant</h3>
<p>Ant中有一些自定义的task，但是我们也可以自己定义task并在target中使用，下面是一个示例。</p>
<p>java代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.tutorialspoint.ant<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.apache.tools.ant.Task<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.apache.tools.ant.Project<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.apache.tools.ant.BuildException<span style="color:#f92672">;</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyTask</span> <span style="color:#66d9ef">extends</span> Task <span style="color:#f92672">{</span>
   String message<span style="color:#f92672">;</span>
   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">execute</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> BuildException <span style="color:#f92672">{</span>
      log<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Message: &#34;</span> <span style="color:#f92672">+</span> message<span style="color:#f92672">,</span> Project<span style="color:#f92672">.</span><span style="color:#a6e22e">MSG_INFO</span><span style="color:#f92672">);</span>
   <span style="color:#f92672">}</span>
   
   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setMessage</span><span style="color:#f92672">(</span>String message<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">message</span><span style="color:#f92672">=</span> message<span style="color:#f92672">;</span>
   <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>build.xml：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">&lt;</span>target name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;custom&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;</span>taskdef name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;custom&#34;</span> classname<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;com.tutorialspoint.ant.MyTask&#34;</span> <span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;</span>custom message<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Hello World!&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/</span>target<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="13-在ide中使用ant">13 在IDE中使用Ant</h3>
<p>在IDE中使用Ant也是一种不错的选择，目前的主流开发工具Eclipse和Idea都继承了Ant构建插件，开发人员可以根据自己的情况选择使用。</p>
<p>参考内容：</p>
<p>[<a href="https://www.tutorialspoint.com/ant/index.htm">1</a>] TutorialsPoint: Learn Apache Ant</p>

    </div>

    
    <div id="qrcode" class="right-fbox">
        <img src="/common/qrcode.jpg" width="256px;" height="256px;"/>
        <br/>
        <p>
            如果文章对您有帮助，请记得打赏哦。帮我家小七🐶、元宝🐱改善下伙食吧，😘
        </p>
        <img src="/common/xiaoqi.png" width="256px;" height="256px;"/>
        <img src="/common/yuanbao.png" width="256px;" height="256px;"/>
    </div>

    </div>
    
    



                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        <span class="footer-text">
            <a href="https://github.com/victoriadrake/hugo-theme-introduction/"><strong>Introduction</strong></a> 主题为 <a href="http://gohugo.io/">Hugo</a> 而设。由开源社群贡献者以 <a href="https://victoria.dev"><!-- raw HTML omitted --><!-- raw HTML omitted --> 和 <!-- raw HTML omitted --><!-- raw HTML omitted --></a> 创造。
        </span>
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="https://hitzhangjie.github.io/js/bundle.e6934e69d06bb8a213134f4c1468f9478bb7755e786dfb60e3c5a917c5335805.js" integrity="sha256-5pNOadBruKITE09MFGj5R4u3dV54bftg48WpF8UzWAU="></script>



        
        
        
        
    </body>
</html>
