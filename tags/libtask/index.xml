<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>libtask on</title><link>/tags/libtask/</link><description>Recent content in libtask on</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Wed, 26 Apr 2017 16:23:49 +0800</lastBuildDate><atom:link href="/tags/libtask/index.xml" rel="self" type="application/rss+xml"/><item><title>Coroutine-Switching</title><link>/blog/2017-04-26-coroutine-switching/</link><pubDate>Wed, 26 Apr 2017 16:23:49 +0800</pubDate><guid>/blog/2017-04-26-coroutine-switching/</guid><description>1. 协程Coroutine # 1.1. 协程coroutine声明 # file: coroutine.h
#include &amp;lt;stdint.h&amp;gt; typedef int64_t (*EntryCallback)(void*); //硬件上下文信息 struct stRegister { uint64_t rax; uint64_t rbx; uint64_t rcx; uint64_t rdx; uint64_t rsi; uint64_t rdi; uint64_t r8; uint64_t r9; uint64_t r10; uint64_t r11; uint64_t r12; uint64_t r13; uint64_t r14; uint64_t r15; uint64_t rbp; uint64_t rsp; uint64_t rip; }; //协程上下文 struct stContext { struct stRegister cpu_register; void *arg; uint8_t *stack; }; typedef struct stContext Coroutine; //创建协程 Coroutine* CreateCoroutine(EntryCallback entry, void *arg); //删除协程 void DeleteCoroutine(Coroutine *ptr); //设置协程栈尺寸 void SetStackSize(uint32_t size); //协程切换 void __SwitchCoroutine__(Coroutine *cur, const Coroutine *next); 1.</description></item></channel></rss>