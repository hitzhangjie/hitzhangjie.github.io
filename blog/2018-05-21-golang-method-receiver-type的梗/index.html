<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.63b6b8ff933309fcc94a30e21d69932290c8643fa1a32893f5681778c776ed3e51c237a1acd00b42426b3bf780c351b4a6ce75b3b659915ef0dd610b2e027a8c.css integrity="sha512-Y7a4/5MzCfzJSjDiHWmTIpDIZD+hoyiT9WgXeMd27T5RwjehrNALQkJrO/eAw1G0ps51s7ZZkV7w3WELLgJ6jA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>golang method receiver-type的梗 - MySpace</title><meta name=description content="golang中方法为什么receiver-type不能为指针类型、接口类型"><link rel=canonical href=/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="golang method receiver-type的梗"><meta property="og:description" content="golang中方法为什么receiver-type不能为指针类型、接口类型"><meta property="og:url" content="/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/"><meta property="og:site_name" content="MySpace"><meta property="article:published_time" content="2018-05-21T12:33:23+08:00"><meta property="article:modified_time" content="2018-05-21T12:33:23+08:00"><meta property="og:image" content="/doks.png"><meta property="og:image:alt" content="MySpace"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@hitzhangjie"><meta name=twitter:creator content="@hitzhangjie"><meta name=twitter:title content="golang method receiver-type的梗"><meta name=twitter:description content="golang中方法为什么receiver-type不能为指针类型、接口类型"><meta name=twitter:image content="/doks.png"><meta name=twitter:image:alt content="golang method receiver-type的梗"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"/#/schema/person/1","name":"","url":"/","sameAs":["https://twitter.com/hitzhangjie","https://www.linkedin.com/in/hitzhangjie/","https://github.com/hitzhangjie"],"image":{"@type":"ImageObject","@id":"/#/schema/image/1","url":"/\u003cnil\u003e","width":null,"height":null,"caption":""}},{"@type":"WebSite","@id":"/#/schema/website/1","url":"/","name":"MySpace","description":"MySpace is a hitzhangjie\u0027s personal space, for blogs, books, journey, thinkings.","publisher":{"@id":"/#/schema/person/1"}},{"@type":"WebPage","@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/","url":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/","name":"golang method receiver-type的梗","description":"golang中方法为什么receiver-type不能为指针类型、接口类型","isPartOf":{"@id":"/#/schema/website/1"},"about":{"@id":"/#/schema/person/1"},"datePublished":"2018-05-21T12:33:23CET","dateModified":"2018-05-21T12:33:23CET","breadcrumb":{"@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/#/schema/image/2"},"inLanguage":"","potentialAction":[{"@type":"ReadAction","target":["/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/"]}]},{"@type":"BreadcrumbList","@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"/","url":"/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"/blog2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"/#/schema/article/1","headline":"golang method receiver-type的梗","description":"golang中方法为什么receiver-type不能为指针类型、接口类型","isPartOf":{"@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/"},"mainEntityOfPage":{"@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/"},"datePublished":"2018-05-21T12:33:23CET","dateModified":"2018-05-21T12:33:23CET","author":{"@id":"/#/schema/person/2"},"publisher":{"@id":"/#/schema/person/1"},"image":{"@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"/#/schema/person/2","name":null,"sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"/blog/2018-05-21-golang-method-receiver-type%E7%9A%84%E6%A2%97/#/schema/image/2","url":"/doks.png","contentUrl":"/doks.png","caption":"golang method receiver-type的梗"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=/site.webmanifest><script type=text/javascript src="https://platform-api.sharethis.com/js/sharethis.js#property=607868a58d7101001829a8df&product=sop" async></script><style>[alt~=sharing]{border:0;box-shadow:none}div#st-1{text-align:unset}div#st-1 .st-btn{height:24px;padding:0 4px}div#st-1 .st-btn>img{top:4.2px}div#st-2 .st-btn{height:24px;padding:0 4px}div#st-2 .st-btn>img{top:4.2px}</style></head><body class="blog single"><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label=MySpace>MySpace</a>
<button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>MySpace</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/blog/>Blog</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/books/>Books</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/journey/introduction>Journey</a></li></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://twitter.com/hitzhangjie><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><small class="ms-2 d-lg-none">Twitter</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/hitzhangjie><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul></div></div></nav></header></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Tag List</h3><ol><li><a href=/tags/go/>go</a></li><li><a href=/tags/method/>method</a></li><li><a href=/tags/receiver/>receiver</a></li></ol></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#1-receiver-type必须满足的条件>1 receiver-type必须满足的条件</a></li><li><a href=#2-receiver-type为什么不能是指针类型>2 receiver-type为什么不能是指针类型？</a></li><li><a href=#3-receiver-type为什么不能是接口类型>3 receiver-type为什么不能是接口类型？</a><ul><li><a href=#31-空接口interface>3.1 空接口interface</a></li><li><a href=#32-非空接口interface-method-list->3.2 非空接口interface{ method-list }</a></li><li><a href=#33-接口方法调用>3.3 接口方法调用</a></li></ul></li><li><a href=#4-总结>4 总结</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>golang method receiver-type的梗</h1><div style=display:flex><div>分享:&nbsp;&nbsp;</div><div><div class=sharethis-inline-share-buttons></div></div></div><hr><p class=lead></p><p>这里来聊聊method receiver type为什么不能是pointer和interface类型。</p><h1 id=1-receiver-type必须满足的条件>1 receiver-type必须满足的条件 <a href=#1-receiver-type%e5%bf%85%e9%a1%bb%e6%bb%a1%e8%b6%b3%e7%9a%84%e6%9d%a1%e4%bb%b6 class=anchor aria-hidden=true>#</a></h1><p>golang里面提供了一定的面向对象支持，比如我们可以为类型T或者*T定义成员方法（类型T称为成员方法的receiver-type），但是这里的类型T必须满足如下几个条件：</p><ul><li>T必须是已经定义过的类型；</li><li>T与当前方法定义必须在同一个package下面；</li><li>T不能是指针；</li><li>T不能是接口类型；</li></ul><p>前面两点都比较容易理解，下面两点是什么梗？为什么就不能在指针类型上添加方法？为什么就不能在interface上添加方法？当然可以一句话待过，golang不支持，但是我想问下为什么？</p><h1 id=2-receiver-type为什么不能是指针类型>2 receiver-type为什么不能是指针类型？ <a href=#2-receiver-type%e4%b8%ba%e4%bb%80%e4%b9%88%e4%b8%8d%e8%83%bd%e6%98%af%e6%8c%87%e9%92%88%e7%b1%bb%e5%9e%8b class=anchor aria-hidden=true>#</a></h1><p>golang允许为 <strong>类型指针*T</strong> 添加方法，但是不允许为 <strong>指针类型本身</strong> 添加方法。<strong>按现有golang的实现方式，为指针类型添加方法会导致方法调用时的歧义</strong>。</p><p>看下面这个示例程序。</p><pre><code class=language-golang>type T int 
func (t *T) Get() T { 
    return *t + 1 
} 
type P *T 
func (p P) Get() T { 
    return *p + 2 
} 
func F() { 
    var v1 T 
    var v2 = &amp;v1 
    var v3 P = &amp;v1 
    fmt.Println(v1.Get(), v2.Get(), v3.Get()) 
}
</code></pre><p>示例程序中 <code>v3.Get()</code> 存在调用歧义，编译器不知道该调用哪个方法了。如果要支持在指针这种receiver-type上定义方法，golang编译器势必要实现地更复杂才能支持到，指针本来就比较容易破坏可读性，还要在一种指针类型上定义方法，对使用者、编译器开发者而言可能都是件费力不讨好的事情。</p><h1 id=3-receiver-type为什么不能是接口类型>3 receiver-type为什么不能是接口类型？ <a href=#3-receiver-type%e4%b8%ba%e4%bb%80%e4%b9%88%e4%b8%8d%e8%83%bd%e6%98%af%e6%8e%a5%e5%8f%a3%e7%b1%bb%e5%9e%8b class=anchor aria-hidden=true>#</a></h1><p>这没有什么好揣测的，只是golang runtime不支持而已。golang现在的实现里，<strong>interface内部结构只能表示方法原型，但是不包括方法定义，struct才可以包括方法定义</strong>（这部分内容感兴趣的可以翻下golang的源码，这里不展开了）。</p><p>当一个类型实现了某个接口声明的全部方法时，就说这个类型实现了这个接口，就可以将这个类型的值赋值给该接口类型的值，此时会更新接口值的 <strong>dynamic value和dynamic type</strong> 字段。这里需要 <strong>根据接口中是否定义了方法列表</strong> 来进一步分析，可以细分为 <strong>接口方法列表为空</strong> 和 <strong>接口方法列表不空</strong> 两种情况讨论。</p><p>下面以这里的示例代码为例进行分析：</p><pre><code class=language-golang>// - 接口类型1
type EmptyIface interface{
}
// - 接口类型2
type Stringer interface {
    String() string
}

// - 类型Binary实现了接口Stringer，也实现了EmptyIface
type Binary uint64

func (i Binary) String() string {
    return strconv.Uitob64(i.Get(), 2)
}

func (i Binary) Get() uint64 {
    return uint64(i)
}

// - 为接口值赋值
var b Binary = Binary(1)
var eface EmptyIface = b
var iface Stringer = b
fmt.Println(iface)
</code></pre><h2 id=31-空接口interface>3.1 空接口interface <a href=#31-%e7%a9%ba%e6%8e%a5%e5%8f%a3interface class=anchor aria-hidden=true>#</a><a href=#31-空接口interface class=anchor aria-hidden=true>#</a></h2><p>eface对应接口类型是interface{}，并且Binary值b小于等于sizeof(uintptr)，那么eface的dynamic value就是直接拷贝b；如果这里是eface := anyBigStruct {&mldr;.}，并且anyBigStruct size大于sizeof(uintptr)，那么就需要开辟内存拷贝anyBigStruct的值，并将新开辟内存的地址设置到dynamic value字段。dynamic type就指向对应类型的定义了。</p><p>此时的接口类型可以表示为：</p><pre><code class=language-golang>type eface struct {
	_type *_type
	data  unsafe.Pointer
}
</code></pre><p>此时的接口值可以表示为：
<img src="data:image/png;base64,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" alt=eface></p><h2 id=32-非空接口interface-method-list->3.2 非空接口interface{ method-list } <a href=#32-%e9%9d%9e%e7%a9%ba%e6%8e%a5%e5%8f%a3interface-method-list- class=anchor aria-hidden=true>#</a><a href=#32-非空接口interface-method-list- class=anchor aria-hidden=true>#</a></h2><p>如果iface对应接口类型interface{methods-list}，<strong>这个时候dynamic value还是与1）中同样的处理，但是dynamic type处理方式不同，需要对运行时接口方法的调用地址进行处理</strong>。</p><p>这时会创建一个 <strong>itable</strong>（类似c++虚函数vtable），这个itable里面保存了iface的接口类型以及接口中声明的各个方法原型对应的调用地址，调用地址从何而来？这里的调用地址也就是接口值动态类型中实现的方法的调用地址。设置完接口方法的所有调用地址后，itable构建完成，然后将iface接口值里面的tab字段指向该itable。</p><p>此时的接口类型可以表示为：</p><pre><code class=language-golang>type iface struct {
	tab  *itab
	data unsafe.Pointer
}
</code></pre><p>此时的接口值可以表示为：
<img src="data:image/png;base64,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" alt=iface></p><h2 id=33-接口方法调用>3.3 接口方法调用 <a href=#33-%e6%8e%a5%e5%8f%a3%e6%96%b9%e6%b3%95%e8%b0%83%e7%94%a8 class=anchor aria-hidden=true>#</a><a href=#33-接口方法调用 class=anchor aria-hidden=true>#</a></h2><p><strong>通过接口值调用方法的时候，需要根据 “该接口值类型、接口值对应的动态类型” 查询对应的接口方法实际的调用地址</strong>。如果该接口类型里面根本就没有方法列表，那肯定就报错了也不会查询tab，eface里面也没这个字段；如果接口类型里面有这个方法定义，那就根据iface.tab指向的itable去查询对应该接口类型、动态类型的对应方法的调用地址，然后执行目标地址处的方法体。</p><p>从将Binary值b赋值给iface，再到通过iface查询动态类型Binary中实现的方法Stringer调用地址，最终执行Binary中实现的方法String()，这整个逻辑处理过程中如何对接口类型声明方法列表、动态类型实现方法列表进行处理，我们应该清楚了。</p><p>总而言之，现在golang实现中interface的内部表示不包含“方法定义”相关的字段，无法表示为interface添加的方法定义，编译器当然也不允许。</p><p>不同的编程语言对函数调用的多态实现有不同的思路，c++是通过填充基本类型的虚函数表的方式，golang是通过类似的这样一种查询表的形式。总结一下就是并非golang无法通过扩展支持在接口上添加方法，只是这样是否真的有必要，值得商榷。至少非空接口是用来定义一种明确的行为（contract）的，在上面又加个方法，是什么意思呢？因此不允许将接口类型定义为receiver type也是与接口的定位相对应的吧。</p><h1 id=4-总结>4 总结 <a href=#4-%e6%80%bb%e7%bb%93 class=anchor aria-hidden=true>#</a></h1><p>receiver-type不允许为指针类型和接口类型，对其中原因进行了一点思考和总结。</p><p>参考资料</p><ol><li>Russ Cox, “接口与itable关系”, https://research.swtch.com/interfaces</li></ol><p>参考图片</p><div class=edit-page><a href=https://github.com/hitzhangjie/myspace/blob/master/content/blog/2018-05-21-golang-method-receiver-type%e7%9a%84%e6%a2%97.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></div><div class="docs-navigation d-flex justify-content-between"><a href=/blog/2018-06-29-godoc%E6%96%87%E6%A1%A3/><div class="card my-1"><div class="card-body py-2">&larr; godoc文档</div></div></a><a class=ms-auto href=/blog/2018-05-19-golang-function-closure%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/><div class="card my-1"><div class="card-body py-2">golang function-closure 实现机制 &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://www.netlify.com/>Netlify</a>, <a class=text-muted href=https://gohugo.io/>Hugo</a>, and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div><div class=col-lg-8 align=right><p><font size=-1>站点构建版本：v</font></p></div></div></div></footer><script src=/js/bootstrap.min.fdbe9b9ba88a036135318f3c721784d684ac9e3280fe282cc80d7d49f7f9c82780cd54228c1608685a230c09984300d7946fc471734d566fcebc148b65bd16db.js integrity="sha512-/b6bm6iKA2E1MY88cheE1oSsnjKA/igsyA19Sff5yCeAzVQijBYIaFojDAmYQwDXlG/EcXNNVm/OvBSLZb0W2w==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.b64f1e7517e5839396950ceee4ef937fbbd3ff20aa1fdd261ce87fa457863404f35a6e5239dd57b20b37f39c2401b933deeef60af180195b16941c88f10e948d.js integrity="sha512-tk8edRflg5OWlQzu5O+Tf7vT/yCqH90mHOh/pFeGNATzWm5SOd1Xsgs385wkAbkz3u72CvGAGVsWlByI8Q6UjQ==" crossorigin=anonymous defer></script>
<script src=/main.min.f16ffd9b364013a1df84be9cd7a45c470cb48639766bf5551e05bba845fe4ab150cb6436de43609bfed9af47c23bd5e395e9a10b932fa6fb2c4ee8f6cc78d7a3.js integrity="sha512-8W/9mzZAE6HfhL6c16RcRwy0hjl2a/VVHgW7qEX+SrFQy2Q23kNgm/7Zr0fCO9XjlemhC5MvpvssTuj2zHjXow==" crossorigin=anonymous defer></script>
<script src=/index.min.6e2ed00f50c39aa27a8fe9411ee5b12c029755cc87e8ad0928bca79bd2b6b52eab8e33eecf260436a3bd2d27845a39dc91aa387d8bd1b0b1d87bb907b4c5f4c9.js integrity="sha512-bi7QD1DDmqJ6j+lBHuWxLAKXVcyH6K0JKLynm9K2tS6rjjPuzyYENqO9LSeEWjnckao4fYvRsLHYe7kHtMX0yQ==" crossorigin=anonymous defer></script></body></html>